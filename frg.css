import React, { useState } from 'react';
import { DatePicker, ButtonPrimary, Input, Select, SelectOption, Label } from '@americanexpress/dls-react';

const StatusForm = () => {
  const [formData, setFormData] = useState({
    projectName: '',
    priority: '',
    jiraLink: '',
    arbApprovalDate: '',
    projectBuildStartDate: '',
    projectBuildStartStep1: '',
    aclRaisedDate: '',
    firewallReqCompleteDate: '',
    projectBuildDate: '',
    projectValidationDate: '',
    projectHandoverDate: '',
    issues: '',
  });

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData(prevState => ({ ...prevState, [name]: value }));
  };

  const formatDate = (date) => {
    if (!date) return '';
    const d = new Date(date);
    return `${d.getMonth() + 1}/${d.getDate()}/${d.getFullYear()}`;
  };

  const handleDateChange = (name) => (date) => {
    setFormData(prevState => ({ ...prevState, [name]: formatDate(date) }));
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log('Form submitted:', formData);
    alert('Form submitted successfully!');
  };

  const renderDatePicker = (label, name) => (
    <div style={styles.fieldContainer}>
      <Label htmlFor={name} style={styles.label}>{label}</Label>
      <DatePicker
        id={`${name}-default`}
        name={name}
        date={formData[name]}
        onDateChange={handleDateChange(name)}
        placeholder="MM/DD/YYYY"
        dateLabels={{
          getPrimaryLabel: () => label,
          getSecondaryLabel: () => '',
        }}
      />
      <Input 
        type="text"
        value={formData[name]}
        onChange={(e) => handleChange({ target: { name, value: e.target.value } })}
        placeholder="MM/DD/YYYY"
        style={styles.dateInput}
      />
    </div>
  );

  const renderField = (label, name, type = "text") => {
    if (type === "date") {
      return renderDatePicker(label, name);
    }
    return (
      <div style={styles.fieldContainer}>
        <Label htmlFor={name} style={styles.label}>{label}</Label>
        {type === "select" ? (
          <Select name={name} value={formData[name]} onChange={handleChange} required style={styles.input}>
            <SelectOption value="">Select Priority</SelectOption>
            <SelectOption value="p0">P0</SelectOption>
            <SelectOption value="p1">P1</SelectOption>
            <SelectOption value="p2">P2</SelectOption>
            <SelectOption value="p3">P3</SelectOption>
          </Select>
        ) : (
          <Input
            type={type}
            id={name}
            name={name}
            value={formData[name]}
            onChange={handleChange}
            required
            style={styles.input}
          />
        )}
      </div>
    );
  };

  // ... (rest of the component remains the same)

  return (
    <form onSubmit={handleSubmit} style={styles.form}>
      {/* ... (form content remains the same) ... */}
    </form>
  );
};

const styles = {
  // ... (previous styles remain the same)
  dateInput: {
    width: '100%',
    padding: '4px',
    fontSize: '12px',
    marginTop: '5px',
  },
};

export default StatusForm;
