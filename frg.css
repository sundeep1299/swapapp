import http.client
import json

# Using HTTPConnection instead of HTTPSConnection since the server is likely not using SSL
conn = http.client.HTTPConnection("10.50.66.58", 8081)

payload = json.dumps({
    "model": "model1",
    "prompt": "generate C code for linked lists",
    "max_tokens": 256,
    "min_tokens": 128
})

headers = {
    'Content-Type': 'application/json'
}

try:
    conn.request("POST", "/v1/completions", payload, headers)
    res = conn.getresponse()
    data = res.read()
    print(data.decode("utf-8"))
except Exception as e:
    print(f"Error occurred: {str(e)}")
finally:
    conn.close()