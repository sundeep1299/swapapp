import React, { useState } from 'react';
import { DatePicker } from '@americanexpress/dls-react';
import { ButtonPrimary } from '@americanexpress/dls-react';
import { Input } from '@americanexpress/dls-react';
import { Select, SelectOption } from '@americanexpress/dls-react';
import { Label } from '@americanexpress/dls-react';

const StatusForm = () => {
  const [formData, setFormData] = useState({
    projectName: '',
    priority: '',
    jiraLink: '',
    arbApprovalDate: '',
    projectBuildStartDate: '',
    projectBuildStartStep1: '',
    aclRaisedDate: '',
    firewallReqCompleteDate: '',
    projectBuildDate: '',
    projectValidationDate: '',
    projectHandoverDate: '',
    issues: '',
  });

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData(prevState => ({
      ...prevState,
      [name]: value
    }));
  };

  const handleDateChange = (name) => (date) => {
    setFormData(prevState => ({
      ...prevState,
      [name]: date
    }));
  };

  const handleSubmit = (fieldName) => (e) => {
    e.preventDefault();
    console.log(`Submitted ${fieldName}:`, formData[fieldName]);
    alert(`Submitted ${fieldName}: ${formData[fieldName]}`);
  };

  const renderField = (label, name, type = "text") => (
    <div style={styles.fieldContainer}>
      <Label htmlFor={name} style={styles.label}>{label}</Label>
      {type === "select" ? (
        <Select name={name} value={formData[name]} onChange={handleChange} required style={styles.input}>
          <SelectOption value="">Select Priority</SelectOption>
          <SelectOption value="p0">P0</SelectOption>
          <SelectOption value="p1">P1</SelectOption>
          <SelectOption value="p2">P2</SelectOption>
          <SelectOption value="p3">P3</SelectOption>
        </Select>
      ) : type === "date" ? (
        <DatePicker
          id={name}
          name={name}
          value={formData[name]}
          onChange={handleDateChange(name)}
          required
          style={styles.input}
        />
      ) : (
        <Input
          type={type}
          id={name}
          name={name}
          value={formData[name]}
          onChange={handleChange}
          required
          style={styles.input}
        />
      )}
      <ButtonPrimary type="button" onClick={handleSubmit(name)} style={styles.button}>Submit</ButtonPrimary>
    </div>
  );

  return (
    <div style={styles.teamSegregatedForm}>
      <div style={styles.teamRow}>
        <div style={{...styles.teamName, backgroundColor: '#FFD700'}}>UCE</div>
        <div style={styles.teamFields}>
          {renderField("Project Name", "projectName")}
          {renderField("Priority", "priority", "select")}
          {renderField("Jira Link", "jiraLink")}
          {renderField("ARB Approval Date", "arbApprovalDate", "date")}
        </div>
      </div>
      <div style={styles.teamRow}>
        <div style={{...styles.teamName, backgroundColor: '#98FB98'}}>Platform Engineering</div>
        <div style={styles.teamFields}>
          {renderField("Project Build Start Date", "projectBuildStartDate", "date")}
          {renderField("Project Build Start Step 1", "projectBuildStartStep1", "date")}
        </div>
      </div>
      <div style={styles.teamRow}>
        <div style={{...styles.teamName, backgroundColor: '#FFD700'}}>UCE</div>
        <div style={styles.teamFields}>
          {renderField("ACL Raised Date", "aclRaisedDate", "date")}
          {renderField("Firewall Request Complete Date", "firewallReqCompleteDate", "date")}
        </div>
      </div>
      <div style={styles.teamRow}>
        <div style={{...styles.teamName, backgroundColor: '#98FB98'}}>Platform Engineering</div>
        <div style={styles.teamFields}>
          {renderField("Project Build Date", "projectBuildDate", "date")}
          {renderField("Project Validation Date", "projectValidationDate", "date")}
          {renderField("Project Handover Date", "projectHandoverDate", "date")}
          {renderField("Issues / Remarks", "issues", "textarea")}
        </div>
      </div>
    </div>
  );
};

const styles = {
  teamSegregatedForm: {
    display: 'table',
    width: '100%',
    borderCollapse: 'separate',
    borderSpacing: '0 15px',
  },
  teamRow: {
    display: 'table-row',
  },
  teamName: {
    display: 'table-cell',
    width: '200px',
    padding: '10px',
    fontWeight: 'bold',
    verticalAlign: 'top',
    borderRadius: '5px 0 0 5px',
    color: '#000',  // Ensuring text is visible on colored background
  },
  teamFields: {
    display: 'table-cell',
    padding: '10px',
    backgroundColor: '#ffffff',
    borderRadius: '0 5px 5px 0',
  },
  fieldContainer: {
    marginBottom: '15px',
  },
  label: {
    display: 'block',
    marginBottom: '5px',
    fontWeight: '500',
  },
  input: {
    width: '70%',  // Reduced width of input fields
    padding: '8px',
    marginBottom: '10px',
    border: '1px solid #ccc',
    borderRadius: '4px',
  },
  button: {
    marginTop: '5px',
    marginLeft: '10px',
  },
};

export default StatusForm;
