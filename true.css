import React, { useMemo, useState } from 'react';
import { Search, SearchResults, SearchResult } from '@americanexpress/dls-react';

const SearchComponent = ({
  value,
  placeholder,
  labelText,
  buttonSearch,
  disabled,
  showLabelText,
  searchButtonLabel,
  clearButtonLabel,
  loading,
  readOnly
}) => {
  const options = ["AMEX 1", "Customer 1", "Question 1", "Question 2", "Question 3"];
  const [filter, setFilter] = useState("");

  const filterData = useMemo(() => 
    options.filter(option => 
      option.toLowerCase().includes(filter.toLowerCase()) || filter === ""
    ), 
    [filter]
  );

  const handleChange = (event) => setFilter(event.target.value);

  return (
    <div className="col-md-6">
      <Search 
        id="df-search" 
        disabled={disabled} 
        value={filter || ""} 
        onChange={handleChange} 
        buttonSearch={buttonSearch}
        placeholder={placeholder}
        searchButtonLabel={searchButtonLabel} 
        clearButtonLabel={clearButtonLabel} 
        labelText={labelText} 
        readOnly={readOnly} 
        autoFocus={filter}
      >
        {filter.length > 0 && (
          <SearchResults>
            {filterData.length > 0 ? (
              filterData.map((option, index) => (
                <SearchResult key={option} id={`df-search-result-${index}`}>
                  <a tabIndex="-1" className="pad-1-lr display-block link-underlined">{option}</a>
                </SearchResult>
              ))
            ) : (
              <li className="pad-1" role="option" aria-selected="false">
                No results for "{filter}"
              </li>
            )}
          </SearchResults>
        )}
      </Search>
    </div>
  );
};

export default SearchComponent;